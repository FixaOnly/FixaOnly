<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App - Dark Mode</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Tampilan Set Username (Sekali Pakai) -->
    <div id="username-view" class="view active">
        <div class="form-container">
            <h1>Selamat Datang</h1>
            <p>Pilih username Anda sekali untuk selamanya di perangkat ini.</p>
            <form id="username-form">
                <input type="text" id="username-input" placeholder="Masukkan username keren Anda" required>
                <button type="submit" class="btn primary">Lanjutkan</button>
            </form>
        </div>
    </div>

    <!-- Tampilan Awal: Landing Page -->
    <div id="landing-view" class="view">
        <div class="form-container">
            <h1 class="welcome-text">Hello, <span id="display-username">---!</span></h1>
            <p>Buat grup baru atau gabung ke grup yang sudah ada.</p>
            <div class="button-group">
                <button id="create-group-btn" class="btn primary">Buat Grup Baru</button>
                <button id="join-group-btn" class="btn secondary">Gabung Grup</button>
            </div>
        </div>
    </div>

    <!-- Tampilan Form Gabung Grup -->
    <div id="join-group-view" class="view">
        <div class="form-container">
            <h2>Gabung ke Grup</h2>
            <form id="join-form">
                <input type="text" id="join-id" placeholder="Masukkan ID Grup" required>
                <button type="submit" class="btn primary">Gabung</button>
            </form>
        </div>
    </div>

    <!-- Tampilan Utama Chat -->
    <div id="chat-view" class="view">
        <header class="chat-header">
            <div class="header-info">
                <span id="group-id-display">ID: ---</span>
                <div class="id-actions">
                    <button id="copy-id-btn" title="Salin ID">ğŸ“‹</button>
                    <button id="share-id-btn" title="Bagikan ID">ğŸ”—</button>
                </div>
            </div>
            <button id="members-btn" class="btn secondary">ğŸ‘¥ Anggota</button>
        </header>

        <main id="messages-container" class="messages-container">
            <!-- Pesan akan muncul di sini -->
        </main>

        <footer class="message-form-container">
            <!-- Preview untuk file yang akan dikirim -->
            <div id="file-preview" class="file-preview" style="display: none;">
                <span id="preview-filename"></span>
                <button id="cancel-file-btn" class="cancel-btn">âŒ</button>
            </div>
            
            <form id="message-form">
                <div class="input-group">
                    <button type="button" id="attach-photo-btn" title="Kirim Foto">ğŸ–¼ï¸</button>
                    <button type="button" id="attach-file-btn" title="Kirim File">ğŸ“</button>
                    <input type="text" id="message-input" placeholder="Ketik pesan..." autocomplete="off">
                    <button type="button" id="record-voice-btn" class="voice-btn" title="Tekan untuk rekam VN">ğŸ¤</button>
                    <button type="submit" class="btn send-btn">â¤</button>
                </div>
            </form>
            <!-- Input file disembunyikan -->
            <input type="file" id="file-input" style="display: none;" accept="image/*, .pdf, .doc, .docx, .zip">
        </footer>
    </div>

    <!-- Modal Daftar Anggota & Admin -->
    <div id="members-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>Daftar Anggota</h3>
            <ul id="members-list">
                <!-- Daftar anggota akan muncul di sini -->
            </ul>
        </div>
    </div>
    
    <!-- Modal Admin untuk Kick/Ban -->
    <div id="admin-modal" class="modal">
        <div class="modal-content">
            <h3>Opsi Admin</h3>
            <p>Atur untuk <strong id="admin-target-name"></strong></p>
            <input type="number" id="ban-duration" placeholder="Durasi ban (menit, kosongkan untuk permanen)">
            <div class="button-group">
                <button id="kick-user-btn" class="btn warning">Kick</button>
                <button id="ban-user-btn" class="btn danger">Ban</button>
            </div>
        </div>
    </div>

    <!-- Notifikasi Pop-up -->
    <div id="notification" class="notification"></div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
    
    <script src="app.js"></script>
</body>
</html>